version: '3.6'

services:
  rentalapi:
    ports:
      - '8091:8000'
    volumes:
      - ./rentalapi:/rentalapi
    env_file: conf/dev.env
    command: ['flask', 'run', '--host=0.0.0.0', '--port=8000']

  rentalpgdb:
    env_file: conf/dev.env
    ports:
      - '5433:5432'
    volumes:
      - rentaldb_volume:/var/lib/postgresql
  
  rentalapp:
    ports:
      - '8090:8080'
    volumes:
      - ./rentalapp:/rentalapp
    command: ['yarn', 'serve']
    

volumes:
  rentaldb_volume: